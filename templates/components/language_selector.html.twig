{# Language Selector Component #}
{% set current_language = get_current_language() %}
{% set available_languages = get_available_languages() %}
{% set switcher_urls = language_switcher_urls() %}

<div class="language-selector dropdown">
    <button class="btn btn-outline-secondary dropdown-toggle" 
            type="button" 
            id="languageDropdown" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
            title="{{ 'navigation.language_selector'|trans }}">
        {% if current_language %}
            <i class="bi bi-globe me-1"></i>
            {{ current_language.code|upper }}
        {% else %}
            <i class="bi bi-globe me-1"></i>
            FR
        {% endif %}
    </button>
    
    <ul class="dropdown-menu" aria-labelledby="languageDropdown">
        {% for lang_code, url_data in switcher_urls %}
            <li>
                <a class="dropdown-item {{ url_data.is_current ? 'active' : '' }}" 
                   href="{{ url_data.url }}"
                   {% if url_data.is_current %}aria-current="page"{% endif %}>
                    <i class="bi bi-globe me-2"></i>
                    <span class="flag-code me-2">{{ url_data.language.code|upper }}</span>
                    {{ url_data.language.nativeName }}
                    {% if url_data.is_current %}
                        <i class="bi bi-check ms-auto text-success"></i>
                    {% endif %}
                </a>
            </li>
        {% endfor %}
    </ul>
</div>

<style>
.language-selector .dropdown-item {
    display: flex;
    align-items: center;
    transition: background-color 0.2s ease;
}

.language-selector .dropdown-item:hover {
    background-color: #f8f9fa;
}

.language-selector .dropdown-item.active {
    background-color: #e7f3ff;
    font-weight: 500;
}

.language-selector .flag-code {
    font-weight: 600;
    min-width: 30px;
}

.language-selector .btn {
    border-radius: 6px;
    font-size: 0.875rem;
}

@media (max-width: 768px) {
    .language-selector .btn {
        padding: 0.375rem 0.75rem;
        font-size: 0.8rem;
    }
}
</style>

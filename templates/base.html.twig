<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Oragon{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        {% block stylesheets %}
            {# Bootstrap CSS #}
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
            {# Bootstrap Icons #}
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
            {# Custom Showcase Styles #}
            <link rel="stylesheet" href="{{ asset('css/showcase.css') }}">
            <style>
                :root {
                    --bs-primary: #0d6efd;
                    --bs-secondary: #6c757d;
                    --bs-success: #198754;
                    --bs-info: #0dcaf0;
                    --bs-warning: #ffc107;
                    --bs-danger: #dc3545;
                    --bs-light: #f8f9fa;
                    --bs-dark: #212529;
                }
                
                [data-bs-theme="dark"] {
                    --bs-body-bg: #1a1a1a;
                    --bs-body-color: #ffffff;
                    --bs-border-color: #333333;
                }

                /* Fixed navbar spacing */
                body {
                    padding-top: 76px;
                }

                /* Smooth scrolling */
                html {
                    scroll-behavior: smooth;
                }

                /* Navbar enhancements */
                .navbar {
                    backdrop-filter: blur(10px);
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }

                .navbar-brand {
                    font-weight: bold;
                    font-size: 1.5rem;
                }

                .language-selector {
                    background: transparent;
                    border: 1px solid var(--bs-border-color);
                    color: var(--bs-body-color);
                }

                .language-selector:focus {
                    border-color: var(--bs-primary);
                    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
                }

                .service-card {
                    transition: transform 0.2s ease-in-out;
                    border: 1px solid var(--bs-border-color);
                }

                .service-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                }

                [data-bs-theme="dark"] .service-card:hover {
                    box-shadow: 0 4px 8px rgba(255,255,255,0.1);
                }

                .theme-toggle {
                    cursor: pointer;
                    transition: transform 0.2s ease-in-out;
                }

                .theme-toggle:hover {
                    transform: scale(1.1);
                }

                .footer {
                    background-color: var(--bs-light);
                    border-top: 1px solid var(--bs-border-color);
                }

                [data-bs-theme="dark"] .footer {
                    background-color: var(--bs-dark);
                }
            </style>
        {% endblock %}

        {% block javascripts %}
            {# Bootstrap JS with Popper.js #}
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
            {# Axios for API calls #}
            <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
        {% endblock %}
    </head>

    <body>
        {% block header %}
            {% include '_header.html.twig' %}
        {% endblock %}

        <main class="flex-shrink-0">
            {% block body %}{% endblock %}
        </main>

        {% block footer %}
            <footer class="footer mt-auto py-5 bg-dark text-white">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-4 mb-4">
                            <h5 class="fw-bold mb-3">
                                <i class="bi bi-hexagon-fill text-primary me-2"></i>Oragon
                            </h5>
                            <p class="text-muted">
                                Solutions digitales innovantes pour transformer votre entreprise. 
                                Nous créons des expériences numériques exceptionnelles.
                            </p>
                            <div class="d-flex gap-3">
                                <a href="#" class="text-primary"><i class="bi bi-linkedin fs-4"></i></a>
                                <a href="#" class="text-primary"><i class="bi bi-github fs-4"></i></a>
                                <a href="#" class="text-primary"><i class="bi bi-twitter fs-4"></i></a>
                                <a href="mailto:jprud67@gmail.com" class="text-primary"><i class="bi bi-envelope fs-4"></i></a>
                            </div>
                        </div>
                        
                        <div class="col-lg-2 col-md-6 mb-4">
                            <h6 class="fw-bold mb-3">Services</h6>
                            <ul class="list-unstyled">
                                <li><a href="#services" class="text-muted text-decoration-none">Nos services</a></li>
                                <li><a href="{{ path('service_search') }}" class="text-muted text-decoration-none">Rechercher</a></li>
                                <li><a href="#" class="text-muted text-decoration-none">Consultation</a></li>
                                <li><a href="#" class="text-muted text-decoration-none">Support</a></li>
                            </ul>
                        </div>
                        
                        <div class="col-lg-2 col-md-6 mb-4">
                            <h6 class="fw-bold mb-3">Entreprise</h6>
                            <ul class="list-unstyled">
                                <li><a href="#about" class="text-muted text-decoration-none">À propos</a></li>
                                <li><a href="#team" class="text-muted text-decoration-none">Équipe</a></li>
                                <li><a href="#" class="text-muted text-decoration-none">Carrières</a></li>
                                <li><a href="#" class="text-muted text-decoration-none">Blog</a></li>
                            </ul>
                        </div>
                        
                        <div class="col-lg-4 mb-4">
                            <h6 class="fw-bold mb-3">Contact</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="bi bi-envelope me-2"></i>
                                    <a href="mailto:jprud67@gmail.com" class="text-muted text-decoration-none">jprud67@gmail.com</a>
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-telephone me-2"></i>
                                    <span class="text-muted">+33 1 23 45 67 89</span>
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-geo-alt me-2"></i>
                                    <span class="text-muted">Paris, France</span>
                                </li>
                            </ul>
                            <a href="#contact" class="btn btn-primary mt-3">
                                <i class="bi bi-send me-2"></i>Nous contacter
                            </a>
                        </div>
                    </div>
                    
                    <hr class="border-secondary my-4">
                    
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <p class="text-muted mb-0">
                                © {{ 'now'|date('Y') }} Oragon. Tous droits réservés.
                            </p>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <p class="text-muted mb-0">
                                Développé avec ❤️ par <strong>Prudence ASSOGBA</strong>
                            </p>
                        </div>
                    </div>
                </div>
            </footer>
        {% endblock %}

        {% block extra_javascripts %}
            <script>
                // Theme management
                const getStoredTheme = () => localStorage.getItem('theme')
                const setStoredTheme = theme => localStorage.setItem('theme', theme)

                const getPreferredTheme = () => {
                    const storedTheme = getStoredTheme()
                    if (storedTheme) {
                        return storedTheme
                    }
                    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
                }

                const setTheme = theme => {
                    document.documentElement.setAttribute('data-bs-theme', theme)
                    
                    // Update theme toggle icon
                    const themeToggle = document.querySelector('#themeToggle')
                    if (themeToggle) {
                        const icon = themeToggle.querySelector('i')
                        if (theme === 'dark') {
                            icon.className = 'bi bi-sun-fill'
                        } else {
                            icon.className = 'bi bi-moon-fill'
                        }
                    }
                }

                // Initialize theme
                setTheme(getPreferredTheme())

                // Theme toggle handler
                window.addEventListener('DOMContentLoaded', () => {
                    const themeToggle = document.querySelector('#themeToggle')
                    if (themeToggle) {
                        themeToggle.addEventListener('click', () => {
                            const currentTheme = document.documentElement.getAttribute('data-bs-theme')
                            const newTheme = currentTheme === 'dark' ? 'light' : 'dark'
                            setStoredTheme(newTheme)
                            setTheme(newTheme)
                        })
                    }
                })

                // Language switching functionality
                function switchLanguage(languageCode) {
                    axios.post(`/api/switch-language/${languageCode}`)
                        .then(response => {
                            if (response.data.success) {
                                // Reload the page to apply the new language
                                window.location.reload()
                            }
                        })
                        .catch(error => {
                            console.error('Erreur lors du changement de langue:', error)
                        })
                }

                // Auto-hide alerts after 5 seconds
                document.addEventListener('DOMContentLoaded', function() {
                    const alerts = document.querySelectorAll('.alert:not(.alert-permanent)')
                    alerts.forEach(function(alert) {
                        setTimeout(function() {
                            const bsAlert = new bootstrap.Alert(alert)
                            bsAlert.close()
                        }, 5000)
                    })
                })
            </script>
        {% endblock %}
    </body>
</html>

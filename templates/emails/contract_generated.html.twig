{% extends "emails/base.html.twig" %}

{% block title %}Votre contrat est prÃªt - EdgeLoan{% endblock %}

{% block header_title %}ğŸ“ Votre contrat est disponible{% endblock %}

{% block content %}
<h2>Excellente nouvelle, {{ user.firstName }} {{ user.lastName }} !</h2>

<p>
    Votre contrat de prÃªt a Ã©tÃ© prÃ©parÃ© et est maintenant <strong>disponible pour signature</strong>. 
    Nous sommes ravis de concrÃ©tiser votre projet avec vous !
</p>

<div class="info-box success">
    <h3>âœ… Contrat gÃ©nÃ©rÃ© avec succÃ¨s</h3>
    <p><strong>NumÃ©ro de contrat :</strong> {{ contract.contractNumber }}</p>
    <p><strong>Date de gÃ©nÃ©ration :</strong> {{ contract.generatedAt|date('d/m/Y Ã  H:i') ?? "now"|date('d/m/Y Ã  H:i') }}</p>
</div>

<div class="application-details">
    <h3>ğŸ“‹ DÃ©tails de votre prÃªt</h3>
    
    <div class="detail-row">
        <span class="detail-label">Montant accordÃ© :</span>
        <span class="detail-value"><strong>{{ application.requestedAmount|number_format(0, ',', ' ') }} â‚¬</strong></span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">DurÃ©e :</span>
        <span class="detail-value">{{ application.loanTerm }} mois</span>
    </div>
    
    {% if application.monthlyPayment %}
    <div class="detail-row">
        <span class="detail-label">MensualitÃ© :</span>
        <span class="detail-value"><strong>{{ application.monthlyPayment|number_format(2, ',', ' ') }} â‚¬</strong></span>
    </div>
    {% endif %}
    
    {% if application.interestRate %}
    <div class="detail-row">
        <span class="detail-label">Taux (TAEG) :</span>
        <span class="detail-value">{{ application.interestRate }}%</span>
    </div>
    {% endif %}
    
    <div class="detail-row">
        <span class="detail-label">PremiÃ¨re Ã©chÃ©ance :</span>
        <span class="detail-value">{{ contract.firstPaymentDate|date('d/m/Y') ?? ("+1 month"|date('d/m/Y')) }}</span>
    </div>
</div>

<div class="info-box">
    <h3>âœï¸ Signature Ã©lectronique sÃ©curisÃ©e</h3>
    <p>
        Votre contrat utilise une <strong>signature Ã©lectronique certifiÃ©e</strong> qui a la mÃªme valeur lÃ©gale 
        qu'une signature manuscrite. Le processus est simple, rapide et 100% sÃ©curisÃ©.
    </p>
</div>

<p style="text-align: center;">
    <a href="{{ url('loan_contract_sign', {'contractNumber': contract.contractNumber}) }}" class="btn">
        ğŸ“ Consulter et signer mon contrat
    </a>
</p>

<div class="info-box warning">
    <h3>â° Important : DÃ©lai de signature</h3>
    <p>
        Merci de signer votre contrat dans les <strong>7 jours</strong> suivant sa rÃ©ception. 
        PassÃ© ce dÃ©lai, nous pourrions Ãªtre amenÃ©s Ã  revoir les conditions proposÃ©es.
    </p>
</div>

<div class="info-box">
    <h3>ğŸ” Que contient votre contrat ?</h3>
    <ul>
        <li>Conditions financiÃ¨res dÃ©taillÃ©es (montant, taux, durÃ©e)</li>
        <li>Ã‰chÃ©ancier complet de remboursement</li>
        <li>Vos droits et obligations</li>
        <li>Conditions d'assurance le cas Ã©chÃ©ant</li>
        <li>ModalitÃ©s de remboursement anticipÃ©</li>
        <li>Informations lÃ©gales et rÃ©glementaires</li>
    </ul>
</div>

<div class="info-box success">
    <h3>ğŸš€ AprÃ¨s signature</h3>
    <ol>
        <li><strong>Validation automatique</strong> - Votre signature est vÃ©rifiÃ©e instantanÃ©ment</li>
        <li><strong>Activation du contrat</strong> - Votre prÃªt entre en vigueur</li>
        <li><strong>PrÃ©paration du virement</strong> - Nous prÃ©parons le versement des fonds</li>
        <li><strong>DÃ©blocage des fonds</strong> - Virement sous 24-48h sur votre compte</li>
    </ol>
</div>

<div class="info-box">
    <h3>ğŸ’¡ Droit de rÃ©tractation</h3>
    <p>
        ConformÃ©ment Ã  la loi, vous disposez d'un <strong>dÃ©lai de rÃ©tractation de 14 jours</strong> 
        Ã  compter de la signature de votre contrat pour changer d'avis, sans frais ni justification.
    </p>
</div>

<p>
    <strong>Des questions avant de signer ?</strong><br>
    Notre Ã©quipe juridique est Ã  votre disposition pour clarifier tous les aspects de votre contrat. 
    Contactez-nous au <strong>01 23 45 67 89</strong> ou par email Ã  <strong>contrat@edgeloan.fr</strong>.
</p>

<p>
    <strong>ProblÃ¨me technique ?</strong><br>
    Si vous rencontrez des difficultÃ©s pour accÃ©der ou signer votre contrat, 
    contactez notre support technique : <strong>support@edgeloan.fr</strong>
</p>

<p>
    Nous sommes fiers de vous accompagner dans ce projet important !
</p>

<p>
    Cordialement,<br>
    <strong>L'Ã©quipe EdgeLoan</strong>
</p>
{% endblock %}
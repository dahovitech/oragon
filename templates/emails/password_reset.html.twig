{% extends "emails/base.html.twig" %}

{% block title %}Réinitialisation de mot de passe - EdgeLoan{% endblock %}

{% block header_title %}🔐 Réinitialisation sécurisée{% endblock %}

{% block content %}
<h2>Bonjour {{ user.firstName }} {{ user.lastName }},</h2>

<p>
    Vous avez demandé la réinitialisation de votre mot de passe pour votre compte EdgeLoan.
</p>

<div class="info-box warning">
    <h3>🔐 Demande de réinitialisation</h3>
    <p><strong>Compte :</strong> {{ user.email }}</p>
    <p><strong>Date de la demande :</strong> {{ "now"|date('d/m/Y à H:i') }}</p>
    <p><strong>Adresse IP :</strong> {{ app.request.clientIp ?? 'Non disponible' }}</p>
</div>

<div class="info-box">
    <h3>⚠️ Si vous n'avez pas fait cette demande</h3>
    <p>
        Si vous n'êtes pas à l'origine de cette demande, <strong>ignorez cet email</strong>. 
        Votre mot de passe actuel reste valide et votre compte n'est pas compromis.
    </p>
    <p>
        Toutefois, nous vous recommandons de nous contacter au <strong>01 23 45 67 89</strong> 
        si vous pensez que votre compte pourrait être menacé.
    </p>
</div>

<div class="info-box success">
    <h3>🚀 Pour créer votre nouveau mot de passe</h3>
    <p>Cliquez sur le bouton ci-dessous pour accéder au formulaire sécurisé :</p>
</div>

<p style="text-align: center;">
    <a href="{{ url('user_password_reset', {'token': resetToken}) }}" class="btn">
        🔓 Créer un nouveau mot de passe
    </a>
</p>

<div class="info-box warning">
    <h3>⏰ Attention : Lien temporaire</h3>
    <p>
        <strong>Ce lien est valide pendant 24 heures uniquement</strong> pour des raisons de sécurité.
    </p>
    <p>
        Passé ce délai, vous devrez refaire une demande de réinitialisation.
    </p>
</div>

<div class="info-box">
    <h3>💡 Conseils pour un mot de passe sécurisé</h3>
    <ul>
        <li><strong>Minimum 8 caractères</strong> (recommandé : 12+)</li>
        <li><strong>Mélange de majuscules et minuscules</strong></li>
        <li><strong>Chiffres et caractères spéciaux</strong> (@, #, !, etc.)</li>
        <li><strong>Évitez les informations personnelles</strong> (nom, date de naissance)</li>
        <li><strong>Utilisez un mot de passe unique</strong> pour EdgeLoan</li>
    </ul>
</div>

<div class="application-details">
    <h3>🔒 Sécurité de votre compte</h3>
    
    <div class="detail-row">
        <span class="detail-label">Chiffrement :</span>
        <span class="detail-value">AES 256-bit</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Connexion sécurisée :</span>
        <span class="detail-value">SSL/TLS</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Surveillance :</span>
        <span class="detail-value">24h/24 - 7j/7</span>
    </div>
</div>

<div class="info-box error">
    <h3>🚨 En cas de problème</h3>
    <p>
        Si le lien ne fonctionne pas ou si vous rencontrez des difficultés :
    </p>
    <ul>
        <li>Vérifiez que le lien n'a pas été coupé par votre client email</li>
        <li>Copiez-collez l'adresse complète dans votre navigateur</li>
        <li>Contactez notre support au <strong>01 23 45 67 89</strong></li>
        <li>Envoyez un email à <strong>support@edgeloan.fr</strong></li>
    </ul>
</div>

<p>
    <strong>Vous ne trouvez pas cet email ?</strong><br>
    Vérifiez votre dossier de spam/courrier indésirable. 
    Ajoutez <strong>noreply@edgeloan.fr</strong> à vos contacts pour éviter ce problème à l'avenir.
</p>

<p>
    <strong>Problème avec le lien de réinitialisation ?</strong><br>
    Si vous ne pouvez pas cliquer sur le lien, copiez-collez cette adresse dans votre navigateur :
</p>
<p style="font-family: monospace; font-size: 12px; word-break: break-all; padding: 10px; background-color: #f8f9fa; border-radius: 4px;">
    {{ url('user_password_reset', {'token': resetToken}, UrlGeneratorInterface.ABSOLUTE_URL) }}
</p>

<p>
    Merci de votre confiance et à très bientôt sur EdgeLoan !
</p>

<p>
    Cordialement,<br>
    <strong>L'équipe EdgeLoan</strong>
</p>
{% endblock %}
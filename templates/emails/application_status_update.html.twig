{% extends "emails/base.html.twig" %}

{% block title %}Mise Ã  jour de votre demande - EdgeLoan{% endblock %}

{% block header_title %}Mise Ã  jour importante{% endblock %}

{% block content %}
<h2>Bonjour {{ user.firstName }} {{ user.lastName }},</h2>

<p>Nous vous informons d'une mise Ã  jour concernant votre demande de prÃªt.</p>

<div class="info-box">
    <h3>ğŸ“‹ Informations sur votre demande</h3>
    <p><strong>RÃ©fÃ©rence :</strong> #{{ application.id }}</p>
    <p><strong>Montant :</strong> {{ application.requestedAmount|number_format(0, ',', ' ') }} â‚¬</p>
    <p><strong>Date de la mise Ã  jour :</strong> {{ "now"|date('d/m/Y Ã  H:i') }}</p>
</div>

<div class="info-box 
{% if newStatus == 'approved' %}success
{% elseif newStatus == 'rejected' %}error
{% elseif newStatus == 'under_review' %}warning
{% else %}
{% endif %}">
    <h3>ğŸ“Š Nouveau statut</h3>
    <p style="font-size: 18px; font-weight: bold;">
        {% if newStatus == 'submitted' %}
            âœ… Demande soumise
        {% elseif newStatus == 'under_review' %}
            ğŸ” En cours d'Ã©tude
        {% elseif newStatus == 'pending_documents' %}
            ğŸ“„ En attente de documents
        {% elseif newStatus == 'approved' %}
            ğŸ‰ ApprouvÃ©e
        {% elseif newStatus == 'rejected' %}
            âŒ Non retenue
        {% elseif newStatus == 'contract_generated' %}
            ğŸ“ Contrat gÃ©nÃ©rÃ©
        {% elseif newStatus == 'contract_signed' %}
            âœï¸ Contrat signÃ©
        {% else %}
            {{ newStatus|title }}
        {% endif %}
    </p>
</div>

<div class="info-box">
    <h3>â„¹ï¸ Que signifie ce statut ?</h3>
    <p>
        {% if newStatus == 'submitted' %}
            Votre demande a Ã©tÃ© enregistrÃ©e avec succÃ¨s et sera Ã©tudiÃ©e prochainement.
        {% elseif newStatus == 'under_review' %}
            Notre Ã©quipe examine actuellement votre dossier en dÃ©tail.
        {% elseif newStatus == 'pending_documents' %}
            Des documents complÃ©mentaires sont requis pour poursuivre l'Ã©tude.
        {% elseif newStatus == 'approved' %}
            FÃ©licitations ! Votre demande a Ã©tÃ© approuvÃ©e par nos services.
        {% elseif newStatus == 'rejected' %}
            Votre demande ne peut Ãªtre acceptÃ©e dans sa forme actuelle.
        {% elseif newStatus == 'contract_generated' %}
            Votre contrat est prÃªt et disponible pour signature.
        {% elseif newStatus == 'contract_signed' %}
            Votre contrat a Ã©tÃ© signÃ©, les fonds seront bientÃ´t dÃ©bloquÃ©s.
        {% else %}
            Le statut de votre demande a Ã©tÃ© mis Ã  jour.
        {% endif %}
    </p>
</div>

{% if newStatus == 'approved' or newStatus == 'contract_generated' %}
<div class="info-box success">
    <h3>ğŸš€ Prochaines Ã©tapes</h3>
    <p>Un email dÃ©taillÃ© va vous Ãªtre envoyÃ© dans les prochaines minutes avec toutes les informations nÃ©cessaires.</p>
</div>
{% elseif newStatus == 'pending_documents' %}
<div class="info-box warning">
    <h3>ğŸ“„ Action requise</h3>
    <p>Vous allez recevoir un email dÃ©taillant les documents Ã  fournir.</p>
</div>
{% elseif newStatus == 'under_review' %}
<div class="info-box">
    <h3>â° DÃ©lai de traitement</h3>
    <p>Nous vous tiendrons informÃ© de l'avancement de votre dossier dans les 24-72h.</p>
</div>
{% endif %}

<p style="text-align: center;">
    <a href="{{ url('user_dashboard') }}" class="btn">Consulter mon dossier</a>
</p>

<p>
    <strong>Questions ?</strong><br>
    Notre Ã©quipe reste Ã  votre disposition au <strong>01 23 45 67 89</strong> 
    ou par email Ã  <strong>contact@edgeloan.fr</strong>.
</p>

<p>
    Cordialement,<br>
    <strong>L'Ã©quipe EdgeLoan</strong>
</p>
{% endblock %}